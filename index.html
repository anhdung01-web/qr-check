<!DOCTYPE html>
<html lang="vi">
<head>
    <!-- Th∆∞ vi·ªán QRCode.js ƒë·ªÉ t·∫°o m√£ QR -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng Qu√©t QR Qu·∫£n L√Ω Ki·ªán H√†ng - Ki·ªÉm Tra S·∫£n Ph·∫©m</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- QR Code Generator Library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <!-- QR Code Scanner Library -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

</head>
<body>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <header>
        <div class="container">
            <div class="logo">
                <i class="fas fa-qrcode"></i>
                <h1>Qu√©t QR Qu·∫£n L√Ω Ki·ªán H√†ng</h1>
            </div>
            <p>H·ªá th·ªëng theo d√µi ki·ªán h√†ng v·ªõi ki·ªÉm tra s·∫£n ph·∫©m th·ª±c t·∫ø</p>
            
            <div class="user-info" id="user-info">
                <i class="fas fa-user-circle"></i>
                <span id="current-user-name">Ch∆∞a ƒëƒÉng nh·∫≠p</span>
                <span id="user-role-badge" class="role-badge" style="display: none;"></span>
                <button id="logout-btn" class="btn btn-danger" style="padding: 5px 10px; font-size: 0.8rem; display: none;">
                    <i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t
                </button>
            </div>
            
            <div class="nav-tabs">
                <button class="tab-btn active" data-tab="scan">
                    <i class="fas fa-camera"></i> Qu√©t & Ki·ªÉm Tra
                    <span class="tab-badge" id="scan-count" style="display: none;"></span>
                </button>
                <button class="tab-btn" data-tab="create" id="create-tab-btn">
                    <i class="fas fa-plus-circle"></i> T·∫°o Ki·ªán H√†ng
                </button>
                <button class="tab-btn" data-tab="parcels">
                    <i class="fas fa-box"></i> Danh S√°ch Ki·ªán
                    <span class="tab-badge" id="parcels-count" style="display: none;"></span>
                </button>
                <button class="tab-btn" data-tab="history">
                    <i class="fas fa-history"></i> L·ªãch S·ª≠
                    <span class="tab-badge" id="history-count" style="display: none;"></span>
                </button>
                <button class="tab-btn" data-tab="guide">
                    <i class="fas fa-question-circle"></i> H∆∞·ªõng D·∫´n
                </button>
                <button class="tab-btn" data-tab="account">
                    <i class="fas fa-user-cog"></i> T√†i kho·∫£n
                </button>
            </div>
        </div>
    </header>
    
    <div class="container">
        <!-- Tab Qu√©t QR & Ki·ªÉm Tra S·∫£n Ph·∫©m -->
        <div id="scan" class="tab-content active">
            <div class="card">
                <h2><i class="fas fa-camera"></i> Qu√©t QR Code & Ki·ªÉm Tra S·∫£n Ph·∫©m</h2>
                
                <div id="login-section" class="auth-section">
                    <h3><i class="fas fa-id-card"></i> ƒêƒÉng nh·∫≠p h·ªá th·ªëng</h3>
                    <div class="auth-tabs" style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <div class="auth-tab active" data-auth-form="login" style="padding: 10px 15px; background: #f8f9fa; border-radius: 5px; cursor: pointer;">ƒêƒÉng nh·∫≠p</div>
                        <div class="auth-tab" data-auth-form="register" style="padding: 10px 15px; background: #f8f9fa; border-radius: 5px; cursor: pointer;">ƒêƒÉng k√Ω t√†i kho·∫£n</div>
                    </div>
                    
                    <!-- Form ƒëƒÉng nh·∫≠p -->
                    <div id="login-form" class="auth-form active">
                        <div class="form-group">
                            <label for="login-code"><i class="fas fa-id-badge"></i> M√£ ƒëƒÉng nh·∫≠p:</label>
                            <input type="text" id="login-code" class="form-control" placeholder="Nh·∫≠p m√£ NVK-xxx ho·∫∑c NGH-xxx">
                        </div>
                        
                        <div class="form-group">
                            <label for="login-password"><i class="fas fa-lock"></i> M·∫≠t kh·∫©u:</label>
                            <input type="password" id="login-password" class="form-control" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
                        </div>
                        
                        <div class="auth-actions" style="display: flex; align-items: center; gap: 15px;">
                            <button id="login-btn" class="btn btn-success">
                                <i class="fas fa-sign-in-alt"></i> ƒêƒÉng nh·∫≠p
                            </button>
                            <span class="auth-link" data-auth-form="register" style="color: var(--secondary-color); cursor: pointer; text-decoration: underline;">Ch∆∞a c√≥ t√†i kho·∫£n? ƒêƒÉng k√Ω ngay</span>
                        </div>
                    </div>
                    
                    <!-- Form ƒëƒÉng k√Ω -->
                    <div id="register-form" class="auth-form" style="display: none;">
                        <div class="form-group">
                            <label for="register-code"><i class="fas fa-id-badge"></i> M√£ ƒëƒÉng k√Ω (t·ª± ƒë·∫∑t):</label>
                            <input type="text" id="register-code" class="form-control" placeholder="V√≠ d·ª•: NVK-001, NGH-001">
                            <small style="color: #666;">M√£ ph·∫£i b·∫Øt ƒë·∫ßu b·∫±ng NVK- (nh√¢n vi√™n kho) ho·∫∑c NGH- (ng∆∞·ªùi g√≥i h√†ng)</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-name"><i class="fas fa-user"></i> H·ªç t√™n:</label>
                            <input type="text" id="register-name" class="form-control" placeholder="Nh·∫≠p h·ªç t√™n c·ªßa b·∫°n">
                        </div>
                        
                        <div class="form-group">
                            <label for="register-email"><i class="fas fa-envelope"></i> Email:</label>
                            <input type="email" id="register-email" class="form-control" placeholder="Nh·∫≠p email c·ªßa b·∫°n">
                        </div>
                        
                        <div class="form-group">
                            <label for="register-password"><i class="fas fa-lock"></i> M·∫≠t kh·∫©u:</label>
                            <input type="password" id="register-password" class="form-control" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
                        </div>
                        
                        <div class="form-group">
                            <label for="register-confirm-password"><i class="fas fa-lock"></i> X√°c nh·∫≠n m·∫≠t kh·∫©u:</label>
                            <input type="password" id="register-confirm-password" class="form-control" placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u">
                        </div>
                        
                        <div class="form-group">
                            <label for="register-phone"><i class="fas fa-phone"></i> S·ªë ƒëi·ªán tho·∫°i:</label>
                            <input type="text" id="register-phone" class="form-control" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i">
                        </div>
                        
                        <div class="auth-actions" style="display: flex; align-items: center; gap: 15px;">
                            <button id="register-btn" class="btn btn-success">
                                <i class="fas fa-user-plus"></i> ƒêƒÉng k√Ω t√†i kho·∫£n
                            </button>
                            <span class="auth-link" data-auth-form="login" style="color: var(--secondary-color); cursor: pointer; text-decoration: underline;">ƒê√£ c√≥ t√†i kho·∫£n? ƒêƒÉng nh·∫≠p ngay</span>
                        </div>
                    </div>
                </div>
                
                <div id="user-auth-status" style="display: none;">
                    <div class="verification-section">
                        <h3><i class="fas fa-user-check"></i> Th√¥ng tin ƒëƒÉng nh·∫≠p</h3>
                        <p>ƒê√£ ƒëƒÉng nh·∫≠p v·ªõi m√£: <strong id="logged-user-code"></strong></p>
                        <p>Vai tr√≤: <strong id="logged-user-role"></strong></p>
                        <p>H·ªç t√™n: <strong id="logged-user-name"></strong></p>
                        <button id="user-logout-btn" class="btn btn-danger">
                            <i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t
                        </button>
                    </div>
                </div>
                
                <div class="camera-container">
                    <div id="reader"></div>
                    <div class="camera-controls">
                        <button id="start-scan-btn" class="btn">
                            <i class="fas fa-play"></i> B·∫≠t Camera
                        </button>
                        <button id="stop-scan-btn" class="btn btn-danger" style="display: none;">
                            <i class="fas fa-stop"></i> T·∫Øt Camera
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="manual-parcel-id"><i class="fas fa-keyboard"></i> Ho·∫∑c nh·∫≠p m√£ ki·ªán h√†ng th·ªß c√¥ng:</label>
                    <input type="text" id="manual-parcel-id" class="form-control" placeholder="V√≠ d·ª•: P-12345678">
                </div>
                
                <button id="scan-btn" class="btn">
                    <i class="fas fa-search"></i> T√¨m & Ki·ªÉm Tra Ki·ªán H√†ng
                </button>
                
                <div id="parcel-result" class="parcel-info" style="display: none;">
                    <h3>Th√¥ng tin ki·ªán h√†ng</h3>
                    <div class="parcel-details">
                        <div class="detail-item">
                            <span class="detail-label">M√£ ki·ªán h√†ng:</span>
                            <span id="result-id">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">S·ªë s·∫£n ph·∫©m:</span>
                            <span id="result-item-count">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">T·ªïng s·ªë l∆∞·ª£ng:</span>
                            <span id="result-total-quantity">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Ng∆∞·ªùi t·∫°o ki·ªán:</span>
                            <span id="result-creator">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Tr·∫°ng th√°i hi·ªán t·∫°i:</span>
                            <span id="result-status">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">L·∫ßn ki·ªÉm tra cu·ªëi:</span>
                            <span id="result-last-verification">-</span>
                        </div>
                    </div>
                    
                    <div id="product-list-container" class="items-container" style="margin-top: 15px;">
                        <!-- Danh s√°ch s·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                    </div>
                    
                    <div class="action-buttons" id="action-buttons">
                        <!-- C√°c n√∫t h√†nh ƒë·ªông s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tab T·∫°o ki·ªán h√†ng -->
        <div id="create" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-plus-circle"></i> T·∫°o Ki·ªán H√†ng M·ªõi</h2>
                
                <div id="permission-notice-create" class="permission-notice" style="display: none; padding: 15px; background-color: #fff3cd; border: 1px solid #ffeaa7; border-radius: 5px; color: #856404;">
                    <i class="fas fa-exclamation-triangle"></i> Ch·ªâ ng∆∞·ªùi g√≥i h√†ng (NGH-) m·ªõi c√≥ quy·ªÅn t·∫°o ki·ªán h√†ng m·ªõi.
                </div>
                
                <div id="create-form" style="display: none;">
                    <div class="help-highlight" id="create-help">
                        <h4><i class="fas fa-lightbulb"></i> H∆∞·ªõng d·∫´n t·∫°o ki·ªán h√†ng</h4>
                        <p>1. Nh·∫≠p m√¥ t·∫£ ki·ªán h√†ng</p>
                        <p>2. Th√™m s·∫£n ph·∫©m v·ªõi ƒë·∫ßy ƒë·ªß th√¥ng tin (t√™n, s·ªë l∆∞·ª£ng, n∆°i s·∫£n xu·∫•t, h·∫°n s·ª≠ d·ª•ng, h√¨nh ·∫£nh)</p>
                        <p>3. H√¨nh ·∫£nh s·∫Ω ƒë∆∞·ª£c l∆∞u d∆∞·ªõi d·∫°ng Base64 ƒë·ªÉ ƒë·∫£m b·∫£o t·ªìn t·∫°i l√¢u d√†i</p>
                        <p>4. H·ªá th·ªëng s·∫Ω t·∫°o QR Code th·∫≠t ƒë·ªÉ qu√©t th·∫≠t</p>
                    </div>
                    
                    <div class="form-group">
                        <label for="parcel-desc"><i class="fas fa-box-open"></i> M√¥ t·∫£ ki·ªán h√†ng:</label>
                        <input type="text" id="parcel-desc" class="form-control" placeholder="V√≠ d·ª•: ƒê∆°n h√†ng ƒëi·ªán t·ª≠, Qu·∫ßn √°o...">
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fas fa-boxes"></i> Danh s√°ch s·∫£n ph·∫©m trong ki·ªán h√†ng:</label>
                        <div class="items-container" id="items-container">
                            <div class="item-row">
                                <input type="text" class="form-control item-input" placeholder="T√™n s·∫£n ph·∫©m" required>
                                <input type="number" class="form-control item-quantity-input" placeholder="S·ªë l∆∞·ª£ng" value="1" min="1" required>
                                <input type="text" class="form-control item-input" placeholder="N∆°i s·∫£n xu·∫•t">
                                <input type="date" class="form-control item-input" placeholder="H·∫°n s·ª≠ d·ª•ng">
                                <div class="file-input-container">
                                    <input type="file" class="item-image-input" accept="image/*" capture="environment">
                                    <div class="file-input-label">
                                        <i class="fas fa-camera"></i> Ch·ª•p/T·∫£i ·∫£nh
                                    </div>
                                </div>
                                <button class="btn btn-success add-item-btn">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                        <button id="add-more-items-btn" class="btn btn-info" style="margin-top: 10px;">
                            <i class="fas fa-plus-circle"></i> Th√™m s·∫£n ph·∫©m kh√°c
                        </button>
                    </div>
                    
                    <div class="form-group">
                        <label for="creator-name"><i class="fas fa-user"></i> T√™n ng∆∞·ªùi g√≥i h√†ng:</label>
                        <input type="text" id="creator-name" class="form-control" placeholder="Nh·∫≠p t√™n ng∆∞·ªùi t·∫°o ki·ªán" value="">
                    </div>
                    
                    <button id="create-parcel-btn" class="btn btn-success">
                        <i class="fas fa-qrcode"></i> T·∫°o Ki·ªán H√†ng & Sinh QR Code
                    </button>
                    
                    <div id="created-parcel-info" style="display: none; margin-top: 25px;">
                        <div class="qr-code-container">
                            <h3>QR Code cho ki·ªán h√†ng</h3>
                            <div id="qrcode"></div>
                            <p id="created-parcel-id" style="margin-top: 15px; font-weight: 600;"></p>
                            <p>In QR code n√†y v√† d√°n l√™n ki·ªán h√†ng</p>
                            <button id="download-qr-btn" class="btn">
                                <i class="fas fa-download"></i> T·∫£i QR Code
                            </button>
                        </div>
                        
                        <div class="parcel-info">
                            <h3>Th√¥ng tin ki·ªán h√†ng v·ª´a t·∫°o</h3>
                            <div class="parcel-details">
                                <div class="detail-item">
                                    <span class="detail-label">M√£ ki·ªán h√†ng:</span>
                                    <span id="new-parcel-id">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">M√¥ t·∫£:</span>
                                    <span id="new-parcel-desc">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">S·ªë s·∫£n ph·∫©m:</span>
                                    <span id="new-parcel-item-count">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">T·ªïng s·ªë l∆∞·ª£ng:</span>
                                    <span id="new-parcel-total-quantity">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Th·ªùi gian t·∫°o:</span>
                                    <span id="new-parcel-time">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Ng∆∞·ªùi t·∫°o:</span>
                                    <span id="new-parcel-creator">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Form s·ª≠a ki·ªán h√†ng -->
                <div id="edit-form" style="display: none;">
                    <div class="help-highlight">
                        <h4><i class="fas fa-edit"></i> S·ª≠a ki·ªán h√†ng</h4>
                        <p>Ch·ªâ c√≥ th·ªÉ s·ª≠a ki·ªán h√†ng ·ªü tr·∫°ng th√°i "ƒê√£ t·∫°o" (created)</p>
                        <p>Khi s·ª≠a xong, t·∫•t c·∫£ thay ƒë·ªïi s·∫Ω ƒë∆∞·ª£c l∆∞u t·ª± ƒë·ªông</p>
                    </div>
                    
                    <div class="form-group">
                        <label for="edit-parcel-id"><i class="fas fa-barcode"></i> M√£ ki·ªán h√†ng:</label>
                        <input type="text" id="edit-parcel-id" class="form-control" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label for="edit-parcel-desc"><i class="fas fa-box-open"></i> M√¥ t·∫£ ki·ªán h√†ng:</label>
                        <input type="text" id="edit-parcel-desc" class="form-control" placeholder="V√≠ d·ª•: ƒê∆°n h√†ng ƒëi·ªán t·ª≠, Qu·∫ßn √°o...">
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fas fa-boxes"></i> Danh s√°ch s·∫£n ph·∫©m trong ki·ªán h√†ng:</label>
                        <div class="items-container" id="edit-items-container">
                            <!-- Items s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                        </div>
                        <button id="edit-add-more-items-btn" class="btn btn-info" style="margin-top: 10px;">
                            <i class="fas fa-plus-circle"></i> Th√™m s·∫£n ph·∫©m kh√°c
                        </button>
                    </div>
                    
                    <div class="edit-actions">
                        <button id="save-edit-btn" class="btn btn-success">
                            <i class="fas fa-save"></i> L∆∞u thay ƒë·ªïi
                        </button>
                        <button id="cancel-edit-btn" class="btn">
                            <i class="fas fa-times"></i> H·ªßy b·ªè
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tab Danh s√°ch ki·ªán h√†ng -->
        <div id="parcels" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-box"></i> Danh S√°ch Ki·ªán H√†ng <span id="parcels-total-count"></span></h2>
                
                <div class="form-group">
                    <input type="text" id="search-parcel" class="form-control" placeholder="T√¨m ki·∫øm ki·ªán h√†ng theo ID, m√¥ t·∫£, s·∫£n ph·∫©m...">
                </div>
                
                <div class="form-group">
                    <label>L·ªçc theo tr·∫°ng th√°i:</label>
                    <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                        <button class="btn status-filter active" data-status="all">T·∫•t c·∫£ (<span id="count-all">0</span>)</button>
                        <button class="btn status-filter" data-status="created">ƒê√£ t·∫°o (<span id="count-created">0</span>)</button>
                        <button class="btn status-filter" data-status="verified">ƒê√£ ki·ªÉm tra (<span id="count-verified">0</span>)</button>
                        <button class="btn status-filter" data-status="exported">ƒê√£ nh·∫≠p v√†o kho (<span id="count-exported">0</span>)</button>
                        <button class="btn status-filter" data-status="problem">C√≥ v·∫•n ƒë·ªÅ (<span id="count-problem">0</span>)</button>
                    </div>
                </div>
                
                <div id="parcels-list-container">
                    <!-- Danh s√°ch ki·ªán h√†ng s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                </div>
                
                <!-- Pagination -->
                <div id="pagination-container" class="pagination" style="display: none;">
                    <!-- Pagination buttons s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                </div>
            </div>
        </div>
        
        <!-- Tab L·ªãch s·ª≠ ho·∫°t ƒë·ªông -->
        <div id="history" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-history"></i> L·ªãch S·ª≠ Ho·∫°t ƒê·ªông H·ªá Th·ªëng <span id="history-total-count"></span></h2>
                <p>Hi·ªÉn th·ªã t·∫•t c·∫£ c√°c ho·∫°t ƒë·ªông qu√©t QR, ki·ªÉm tra s·∫£n ph·∫©m v√† thay ƒë·ªïi tr·∫°ng th√°i</p>
                
                <div class="logs-container" id="all-logs-container">
                    <!-- L·ªãch s·ª≠ s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                </div>
                
                <!-- Pagination cho l·ªãch s·ª≠ -->
                <div id="history-pagination-container" class="pagination" style="display: none;">
                    <!-- Pagination buttons s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                </div>
            </div>
        </div>
        
        <!-- Tab H∆∞·ªõng d·∫´n -->
        <div id="guide" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-question-circle"></i> H∆∞·ªõng D·∫´n S·ª≠ D·ª•ng H·ªá Th·ªëng</h2>
                
                <div class="guide-section">
                    <h3><i class="fas fa-user-tie"></i> Vai tr√≤ trong h·ªá th·ªëng</h3>
                    <div class="guide-step">
                        <h4><span class="step-number">1</span> Ng∆∞·ªùi g√≥i h√†ng (NGH-)</h4>
                        <ul>
                            <li>T·∫°o ki·ªán h√†ng m·ªõi v·ªõi ƒë·∫ßy ƒë·ªß th√¥ng tin s·∫£n ph·∫©m</li>
                            <li>Ch·ª•p ·∫£nh s·∫£n ph·∫©m v√† l∆∞u v√†o h·ªá th·ªëng</li>
                            <li>S·ª≠a ki·ªán h√†ng ·ªü tr·∫°ng th√°i "ƒê√£ t·∫°o"</li>
                            <li>Xem t·∫•t c·∫£ ki·ªán h√†ng m√¨nh ƒë√£ t·∫°o</li>
                        </ul>
                    </div>
                    <div class="guide-step">
                        <h4><span class="step-number">2</span> Nh√¢n vi√™n kho (NVK-)</h4>
                        <ul>
                            <li>Qu√©t QR code ki·ªán h√†ng ƒë·ªÉ ki·ªÉm tra</li>
                            <li>ƒê·ªëi chi·∫øu s·∫£n ph·∫©m th·ª±c t·∫ø v·ªõi th√¥ng tin h·ªá th·ªëng</li>
                            <li>X√°c nh·∫≠n ki·ªán h√†ng ƒë√£ ƒë√∫ng v√† ƒë·ªß</li>
                            <li>Nh·∫≠p v√†o kho ki·ªán h√†ng sau khi ki·ªÉm tra th√†nh c√¥ng</li>
                            <li>Ghi ch√∫ v·∫•n ƒë·ªÅ n·∫øu ph√°t hi·ªán sai s√≥t</li>
                        </ul>
                    </div>
                </div>
                
                <div class="guide-section">
                    <h3><i class="fas fa-road"></i> Quy tr√¨nh l√†m vi·ªác</h3>
                    <div class="guide-step">
                        <h4><span class="step-number">1</span> T·∫°o ki·ªán h√†ng (NGH)</h4>
                        <p>NGH t·∫°o ki·ªán h√†ng, th√™m s·∫£n ph·∫©m, ch·ª•p ·∫£nh v√† t·∫°o QR code. H·ªá th·ªëng sinh QR code th·∫≠t ƒë·ªÉ qu√©t th·∫≠t.</p>
                    </div>
                    <div class="guide-step">
                        <h4><span class="step-number">2</span> Ki·ªÉm tra ki·ªán h√†ng (NVK)</h4>
                        <p>NVK qu√©t QR code, ƒë·ªëi chi·∫øu s·∫£n ph·∫©m th·ª±c t·∫ø v·ªõi th√¥ng tin h·ªá th·ªëng. X√°c nh·∫≠n "Th√†nh c√¥ng" ho·∫∑c "C√≥ v·∫•n ƒë·ªÅ".</p>
                    </div>
                    <div class="guide-step">
                        <h4><span class="step-number">3</span> Nh·∫≠p v√†o kho (NVK)</h4>
                        <p>Sau khi ki·ªÉm tra th√†nh c√¥ng, NVK th·ª±c hi·ªán "Nh·∫≠p v√†o kho" ƒë·ªÉ ƒë√°nh d·∫•u ki·ªán ƒë√£ giao cho b·ªô ph·∫≠n v·∫≠n chuy·ªÉn.</p>
                    </div>
                    <div class="guide-step">
                        <h4><span class="step-number">4</span> S·ª≠a ki·ªán h√†ng (NGH)</h4>
                        <p>NGH c√≥ th·ªÉ s·ª≠a ki·ªán h√†ng ·ªü tr·∫°ng th√°i "ƒê√£ t·∫°o" n·∫øu c·∫ßn ƒëi·ªÅu ch·ªânh th√¥ng tin.</p>
                    </div>
                </div>
                
                <div class="guide-section">
                    <h3><i class="fas fa-camera"></i> H∆∞·ªõng d·∫´n ch·ª•p ·∫£nh s·∫£n ph·∫©m</h3>
                    <div class="guide-step">
                        <h4><span class="step-number">1</span> Chu·∫©n b·ªã</h4>
                        <p>ƒê·∫£m b·∫£o s·∫£n ph·∫©m ƒë∆∞·ª£c ƒë·∫∑t trong khu v·ª±c ƒë·ªß s√°ng, r√µ n√©t. Ch·ª•p to√†n b·ªô s·∫£n ph·∫©m ho·∫∑c ph·∫ßn quan tr·ªçng.</p>
                    </div>
                    <div class="guide-step">
                        <h4><span class="step-number">2</span> L∆∞u tr·ªØ ·∫£nh</h4>
                        <p>H·ªá th·ªëng l∆∞u ·∫£nh d∆∞·ªõi d·∫°ng Base64, ƒë·∫£m b·∫£o ·∫£nh t·ªìn t·∫°i l√¢u d√†i v√† kh√¥ng b·ªã m·∫•t khi t·∫£i l·∫°i trang.</p>
                    </div>
                    <div class="guide-step">
                        <h4><span class="step-number">3</span> ƒê·ªëi chi·∫øu ·∫£nh</h4>
                        <p>NVK c√≥ th·ªÉ s·ª≠ d·ª•ng ·∫£nh ƒë√£ ch·ª•p ƒë·ªÉ ƒë·ªëi chi·∫øu v·ªõi s·∫£n ph·∫©m th·ª±c t·∫ø trong qu√° tr√¨nh ki·ªÉm tra.</p>
                    </div>
                </div>
                
                <div class="guide-section">
                    <h3><i class="fas fa-qrcode"></i> H∆∞·ªõng d·∫´n QR Code</h3>
                    <div class="guide-step">
                        <h4><span class="step-number">1</span> T·∫°o QR Code</h4>
                        <p>H·ªá th·ªëng t·∫°o QR Code th·∫≠t ch·ª©a m√£ ki·ªán h√†ng, c√≥ th·ªÉ in ra v√† d√°n l√™n ki·ªán h√†ng.</p>
                    </div>
                    <div class="guide-step">
                        <h4><span class="step-number">2</span> Qu√©t QR Code</h4>
                        <p>S·ª≠ d·ª•ng camera ƒëi·ªán tho·∫°i ho·∫∑c m√°y qu√©t chuy√™n d·ª•ng ƒë·ªÉ qu√©t QR Code. ƒê·∫£m b·∫£o √°n s√°ng ƒë·ªß v√† camera s·∫°ch s·∫Ω.</p>
                    </div>
                    <div class="guide-step">
                        <h4><span class="step-number">3</span> X·ª≠ l√Ω l·ªói qu√©t</h4>
                        <p>N·∫øu kh√¥ng qu√©t ƒë∆∞·ª£c, c√≥ th·ªÉ nh·∫≠p th·ªß c√¥ng m√£ ki·ªán h√†ng trong √¥ "Nh·∫≠p m√£ ki·ªán h√†ng th·ªß c√¥ng".</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tab Qu·∫£n l√Ω t√†i kho·∫£n -->
        <div id="account" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-user-cog"></i> Qu·∫£n l√Ω t√†i kho·∫£n</h2>
                
                <div id="account-info" style="display: none;">
                    <div class="parcel-info">
                        <h3>Th√¥ng tin t√†i kho·∫£n</h3>
                        <div class="parcel-details">
                            <div class="detail-item">
                                <span class="detail-label">M√£ t√†i kho·∫£n:</span>
                                <span id="account-code">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">H·ªç t√™n:</span>
                                <span id="account-name">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Email:</span>
                                <span id="account-email">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">S·ªë ƒëi·ªán tho·∫°i:</span>
                                <span id="account-phone">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Vai tr√≤:</span>
                                <span id="account-role">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Ng√†y ƒëƒÉng k√Ω:</span>
                                <span id="account-registered">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group" style="margin-top: 20px;">
                        <h3><i class="fas fa-key"></i> ƒê·ªïi m·∫≠t kh·∫©u</h3>
                        <div class="form-group">
                            <label for="current-password">M·∫≠t kh·∫©u hi·ªán t·∫°i:</label>
                            <input type="password" id="current-password" class="form-control" placeholder="Nh·∫≠p m·∫≠t kh·∫©u hi·ªán t·∫°i">
                        </div>
                        <div class="form-group">
                            <label for="new-password">M·∫≠t kh·∫©u m·ªõi:</label>
                            <input type="password" id="new-password" class="form-control" placeholder="Nh·∫≠p m·∫≠t kh·∫©u m·ªõi">
                        </div>
                        <div class="form-group">
                            <label for="confirm-new-password">X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi:</label>
                            <input type="password" id="confirm-new-password" class="form-control" placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi">
                        </div>
                        <button id="change-password-btn" class="btn btn-warning">
                            <i class="fas fa-key"></i> ƒê·ªïi m·∫≠t kh·∫©u
                        </button>
                    </div>
                    
                    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
                        <h3><i class="fas fa-exclamation-triangle"></i> Khu v·ª±c nguy hi·ªÉm</h3>
                        <p>X√≥a t√†i kho·∫£n s·∫Ω x√≥a vƒ©nh vi·ªÖn t·∫•t c·∫£ d·ªØ li·ªáu li√™n quan ƒë·∫øn t√†i kho·∫£n n√†y.</p>
                        <button id="delete-account-btn" class="btn btn-danger">
                            <i class="fas fa-trash"></i> X√≥a t√†i kho·∫£n
                        </button>
                    </div>
                </div>
                
                <div id="account-login-required" class="permission-notice" style="padding: 15px; background-color: #fff3cd; border: 1px solid #ffeaa7; border-radius: 5px; color: #856404;">
                    <i class="fas fa-exclamation-triangle"></i> Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ xem th√¥ng tin t√†i kho·∫£n.
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal ki·ªÉm tra s·∫£n ph·∫©m th·ª±c t·∫ø -->
    <div id="verification-modal" class="modal">
        <div class="modal-content">
            <h3><i class="fas fa-clipboard-check"></i> Ki·ªÉm Tra S·∫£n Ph·∫©m Th·ª±c T·∫ø</h3>
            <p>Ki·ªÉm tra s·∫£n ph·∫©m th·ª±c t·∫ø so v·ªõi th√¥ng tin h·ªá th·ªëng</p>
            
            <div id="verification-content">
                <!-- N·ªôi dung ki·ªÉm tra s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button id="complete-verification-btn" class="btn btn-success">
                    <i class="fas fa-check-circle"></i> Ho√†n t·∫•t ki·ªÉm tra
                </button>
                <button id="cancel-verification-btn" class="btn">
                    <i class="fas fa-times"></i> H·ªßy b·ªè
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal hi·ªÉn th·ªã chi ti·∫øt ki·ªán h√†ng -->
    <div id="parcel-detail-modal" class="modal">
        <div class="modal-content">
            <h3>Chi ti·∫øt ki·ªán h√†ng</h3>
            <div id="modal-parcel-details"></div>
            <div style="text-align: right; margin-top: 20px;">
                <button id="close-modal-btn" class="btn">ƒê√≥ng</button>
            </div>
        </div>
    </div>
    
    <!-- Modal camera ch·ª•p ·∫£nh -->
    <div id="camera-modal" class="modal">
        <div class="modal-content camera-modal">
            <h3><i class="fas fa-camera"></i> Ch·ª•p ·∫£nh ki·ªÉm tra</h3>
            <div id="camera-preview-container">
                <video id="camera-preview" autoplay playsinline class="camera-preview"></video>
                <canvas id="camera-canvas" style="display: none;"></canvas>
            </div>
            <div id="captured-image-container" style="display: none;">
                <h4>·∫¢nh ƒë√£ ch·ª•p:</h4>
                <img id="captured-image" class="camera-preview" src="" alt="·∫¢nh ƒë√£ ch·ª•p">
            </div>
            <div style="display: flex; gap: 10px; margin-top: 20px; justify-content: center;">
                <button id="capture-btn" class="btn btn-success">
                    <i class="fas fa-camera"></i> Ch·ª•p ·∫£nh
                </button>
                <button id="retake-btn" class="btn btn-warning" style="display: none;">
                    <i class="fas fa-redo"></i> Ch·ª•p l·∫°i
                </button>
                <button id="use-photo-btn" class="btn btn-info" style="display: none;">
                    <i class="fas fa-check"></i> S·ª≠ d·ª•ng ·∫£nh n√†y
                </button>
                <button id="close-camera-btn" class="btn">
                    <i class="fas fa-times"></i> ƒê√≥ng
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal th√¥ng b√°o qu√©t th√†nh c√¥ng -->
    <div id="scan-success-modal" class="modal">
        <div class="modal-content scan-success-modal">
            <div class="scan-success-content">
                <div class="scan-success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h3 class="scan-success-title">Ki·ªÉm tra th√†nh c√¥ng!</h3>
                <div class="scan-success-details" id="scan-success-details">
                    <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                </div>
                <button id="close-scan-success-modal" class="btn btn-success">
                    <i class="fas fa-check"></i> ƒê√≥ng
                </button>
            </div>
        </div>
    </div>
    
    <!-- Confirmation Dialog -->
    <div id="confirmation-dialog" class="confirmation-dialog">
        <div class="confirmation-content">
            <h3 id="confirmation-title">X√°c nh·∫≠n h√†nh ƒë·ªông</h3>
            <p id="confirmation-message">B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën th·ª±c hi·ªán h√†nh ƒë·ªông n√†y?</p>
            <div class="confirmation-actions">
                <button id="confirm-yes" class="btn btn-success">C√≥</button>
                <button id="confirm-no" class="btn">Kh√¥ng</button>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>H·ªá th·ªëng qu√©t QR qu·∫£n l√Ω ki·ªán h√†ng v·ªõi ki·ªÉm tra s·∫£n ph·∫©m th·ª±c t·∫ø | D·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u tr·ªØ c·ª•c b·ªô tr√™n tr√¨nh duy·ªát</p>
            <p>Phi√™n b·∫£n n√¢ng cao: H·ªá th·ªëng ƒëƒÉng k√Ω v√† ƒëƒÉng nh·∫≠p v·ªõi m·∫≠t kh·∫©u b·∫£o m·∫≠t</p>
        </div>
    </footer>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="app.js"></script>
    <div id="ai-result-modal" class="ai-modal">
    <div class="ai-modal-content">
        <div class="ai-icon">ü§ñ</div>
        <h2>AI qu√©t th√†nh c√¥ng</h2>
        <div id="ai-result-text" class="ai-result-text"></div>
        <button onclick="closeAIResultModal()" class="ai-btn">ƒê√≥ng</button>
    </div>
</div>
</body>
</html>